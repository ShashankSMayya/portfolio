---
// Define technologies with their logos (using popular icon libraries or SVGs)
const technologies = [
  { name: 'Flutter', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/flutter/flutter-original.svg' },
  { name: 'Node.js', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nodejs/nodejs-original.svg' },
  { name: 'MongoDB', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mongodb/mongodb-original.svg' },
  { name: 'Bootstrap', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/bootstrap/bootstrap-original.svg' },
  { name: 'HTML5', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg' },
  { name: 'Supabase', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/supabase/supabase-original.svg' },
  { name: 'WebSockets', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/socketio/socketio-original.svg' },
  { name: 'Dart', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/dart/dart-original.svg' },
  { name: 'JavaScript', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg' },
  { name: 'TypeScript', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg' },
  { name: 'Git', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg' },
  { name: 'Firebase', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/firebase/firebase-plain.svg' },
];

// Triple the array to ensure smooth infinite scroll
const tripleArray = [...technologies, ...technologies, ...technologies];
---

<div class="tech-stack-container my-8 overflow-hidden">
  <h2 class="text-2xl font-bold text-center mb-6 text-base-content">Technologies I Work With</h2>
  <div class="marquee-wrapper relative">
    <div class="marquee-content">
      <div class="marquee-track flex gap-6">
        {tripleArray.map((tech, index) => (
          <div key={`${tech.name}-${index}`} class="tech-item flex flex-col items-center justify-center min-w-[80px]">
            <img 
              src={tech.icon} 
              alt={tech.name} 
              class="w-12 h-12 object-contain hover:scale-110 transition-transform duration-300"
              loading="lazy"
            />
            <span class="text-xs mt-2 text-base-content/70">{tech.name}</span>
          </div>
        ))}
      </div>
    </div>
  </div>
</div>

<style>
  .marquee-wrapper {
    position: relative;
  }

  /* Blur effect on edges */
  .marquee-wrapper::before,
  .marquee-wrapper::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    width: 120px;
    z-index: 10;
    pointer-events: none;
  }

  .marquee-wrapper::before {
    left: 0;
    backdrop-filter: blur(0px) blur(1px) blur(2px) blur(3px) blur(4px);
    -webkit-backdrop-filter: blur(0px) blur(1px) blur(2px) blur(3px) blur(4px);
    background: linear-gradient(to right, rgba(0,0,0,0.1), transparent);
  }

  .marquee-wrapper::after {
    right: 0;
    backdrop-filter: blur(4px) blur(3px) blur(2px) blur(1px) blur(0px);
    -webkit-backdrop-filter: blur(4px) blur(3px) blur(2px) blur(1px) blur(0px);
    background: linear-gradient(to left, rgba(0,0,0,0.1), transparent);
  }

  /* Additional mask for smooth fade */
  .marquee-content {
    mask-image: linear-gradient(
      to right,
      transparent 0%,
      rgba(0,0,0,0.2) 5%,
      rgba(0,0,0,0.6) 10%,
      black 15%,
      black 85%,
      rgba(0,0,0,0.6) 90%,
      rgba(0,0,0,0.2) 95%,
      transparent 100%
    );
    -webkit-mask-image: linear-gradient(
      to right,
      transparent 0%,
      rgba(0,0,0,0.2) 5%,
      rgba(0,0,0,0.6) 10%,
      black 15%,
      black 85%,
      rgba(0,0,0,0.6) 90%,
      rgba(0,0,0,0.2) 95%,
      transparent 100%
    );
  }

  .marquee-content {
    overflow: hidden;
  }

  .marquee-track {
    animation: scroll-infinite 30s linear infinite;
    width: fit-content;
  }

  @keyframes scroll-infinite {
    0% {
      transform: translateX(0);
    }
    100% {
      /* Move by exactly one set of technologies */
      transform: translateX(calc(-100% / 3));
    }
  }

  .marquee-track:hover {
    animation-play-state: paused;
  }

  /* Dark mode brightness adjustment */
  [data-theme="dark"] .tech-item img {
    filter: brightness(0.9);
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .tech-item {
      min-width: 60px;
    }
    
    .tech-item img {
      width: 40px;
      height: 40px;
    }

    .tech-item span {
      font-size: 0.65rem;
    }
    
    .marquee-track {
      animation-duration: 20s;
      gap: 1rem;
    }

    /* Smaller blur width on mobile */
    .marquee-wrapper::before,
    .marquee-wrapper::after {
      width: 50px;
    }
  }
</style>